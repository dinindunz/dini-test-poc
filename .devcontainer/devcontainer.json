// For format details, see https://aka.ms/vscode-remote/devcontainer.json
{
	"name": "DevContainerImage",
	"build": {
		"dockerfile": "../Dockerfile"
	},
	"containerUser": "dev-container",
	"mounts": [
		"src=/var/run/docker.sock,target=/var/run/docker.sock,type=bind",
		"src=${localEnv:HOME}/.aws,dst=/home/dev-container/.aws,type=bind",
		"src=${localEnv:HOME}/.ssh,dst=/home/dev-container/.ssh,type=bind",
		"src=${localEnv:HOME}/.gitconfig,dst=/home/dev-container/.gitconfig,type=bind",
		"src=${localEnv:HOME}/.zsh_history,dst=/home/dev-container/.zsh_history,type=bind",
		"src=${localEnv:HOME}/.bash_history,dst=/home/dev-container/.bash_history,type=bind",
		"src=${localEnv:HOME}/Projects/GitHub/nab-dac/.devcontainer/,dst=${localEnv:HOME}/Projects/GitHub/nab-dac/.devcontainer/,type=bind"
	],
	"containerEnv": {
		"AWS_REGION": "ap-southeast-2",
		"AWS_PROFILE": "mantel-sandpit2"		
	},
	"remoteEnv": {
		"GITHUB_TOKEN": "${localEnv:GITHUB_PERSONAL_ACCESS_TOKEN}"
	},
	"postCreateCommand": "echo \"$GITHUB_TOKEN\" | gh auth login --with-token",
	"customizations": {
		"vscode": {
			"settings": {
				"extensions.verifySignature": false,
				"terminal.integrated.defaultProfile.linux": "zsh",
        		"terminal.integrated.profiles.linux": {
					"zsh": {
						"path": "zsh"
					}
				},
                "java.home": "/usr/local/openjdk-17",
                "java.configuration.runtimes": [
                    {
                        "name": "JavaSE-17",
                        "path": "/usr/local/openjdk-17"
                    }
                ],
                "maven.executable.path": "/usr/bin/mvn",
                "java.compile.nullAnalysis.mode": "automatic",
                "java.format.settings.url": "https://raw.githubusercontent.com/google/styleguide/gh-pages/eclipse-java-google-style.xml"
			},
			"extensions": [
				"vscjava.vscode-java-pack",
                "vscjava.vscode-spring-boot-dashboard",
                "pivotal.vscode-spring-boot",
                "redhat.java",
                "vscjava.vscode-maven",
                "ms-vscode.vscode-json",
                "vscjava.vscode-java-test",
                "vscjava.vscode-java-debug",
                "saoudrizwan.claude-dev"		
			]
		}
	},
    "features": {
        "ghcr.io/devcontainers/features/git:1": {},
        "ghcr.io/devcontainers/features/github-cli:1": {}
    }
}
